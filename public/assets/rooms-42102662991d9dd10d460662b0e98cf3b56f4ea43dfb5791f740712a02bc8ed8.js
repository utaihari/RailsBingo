(function(){var n,t,i;i=[],n=[],$(function(){return this.community_id=$("#data").data("community_id"),this.room_id=$("#data").data("room_id"),this.condition=$("#data").data("condition")}),this.rate_update=function(n){$.ajaxSetup({async:!1}),$.getJSON("/API/get_number_rate",{room_id:n},function(n){i=n})},this.notices_update=function(n){$.getJSON("/API/get_notices",{room_id:n},function(n){var t,i,e;for($("#notices").text(""),i=0,e=n.length;i<e;i++)t=n[i],$("#notices").prepend('<div><span class="user_name">'+t.user_name+"\u3055\u3093: </span><span>"+t.notice+"</span>")})},this.get_random_number=function(){var n,t,e,o,s,d,r,a;for(d=[],t=e=0,s=i.length;e<s;t=++e)for(r=i[t],n=o=0,a=r;0<=a?o<a:o>a;n=0<=a?++o:--o)d.push(t+1);return 0===d.length?void $("#number-display").text("\u5168\u3066\u306e\u6570\u5b57\u304c\u51fa\u529b\u3055\u308c\u307e\u3057\u305f"):d[Math.floor(Math.random()*d.length)]},this.add_number=function(n,t){$.post("/API/add_number",{room_id:n,number:t},function(){})},this.random_number_add=function(n){var t;this.rate_update(n),t=this.get_random_number(),this.add_number(n,t),$("#number-display").text(t)},this.start_game=function(n){var t;$.get("/API/game_main/"+this.community_id+"/"+n),t=1},t=0,this.bingo_users_window,this.check_bingo_users=function(){var i,e,o,s,d,r,a;if($.ajaxSetup({async:!1}),$.getJSON("/API/check_bingo_users",{room_id:this.room_id},function(t){return n=t}),t!==n.length)for(t=n.length,$("#bingo-user-list").empty(),i=e=0,s=n.length;e<s;i=++e)a=n[i],$("#bingo-user-list").prepend("<div> "+a.name+", "+a.times+"\u56de\u76ee, "+a.seconds+"ms </div>");if(null!=this.bingo_users_window&&!this.bingo_users_window.closed)for(r=this.bingo_users_window.document.getElementById("bingo-user-list"),$(r).empty(),i=o=0,d=n.length;o<d;i=++o)a=n[i],$(r).prepend("<div> "+a.name+", "+a.times+"\u56de\u76ee, "+a.seconds+"ms </div>")},this.view_mail_address=function(n){$(n).children(".view-mail-addess").toggle()},this.open_bingo_users_window=function(n){this.bingo_users_window=window.open(n.href,"\u30d3\u30f3\u30b4\u30ea\u30b9\u30c8","height=300, width=400")},this.joined_user_update=function(n){$.get("/API/member_list/"+n)}}).call(this);