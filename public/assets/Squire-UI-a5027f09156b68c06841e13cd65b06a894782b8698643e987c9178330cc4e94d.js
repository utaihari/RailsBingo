$(document).ready(function(){Squire.prototype.testPresenceinSelection=function(t,e,o,n){var i=this.getPath(),s=n.test(i)|this.hasFormat(o);return!(t!=e||!s)},SquireUI=function(t){"undefined"==typeof t.buildPath&&(t.buildPath="build/");var e;if(t.replace)e=$(t.replace).parent(),$(t.replace).remove();else{if(!t.div)throw new Error("No element was defined for the editor to inject to.");e=$(t.div)}var o=document.createElement("iframe"),n=document.createElement("div");return n.className="Squire-UI",o.height=t.height,$(n).load(t.buildPath+"Squire-UI.html",function(){this.linkDrop=new Drop({target:$("#makeLink").first()[0],content:$("#drop-link").html(),position:"bottom center",openOn:"click"}),this.linkDrop.on("open",function(){$(".quit").click(function(){$(this).parent().parent().removeClass("drop-open")}),$(".submitLink").click(function(){var t=o.contentWindow.editor;t.makeLink($(this).parent().children("#url").first().val()),$(this).parent().parent().removeClass("drop-open"),$(this).parent().children("#url").attr("value","")})}),this.imageDrop=new Drop({target:$("#insertImage").first()[0],content:$("#drop-image").html(),position:"bottom center",openOn:"click"}),this.imageDrop.on("open",function(){$(".quit").unbind().click(function(){$(this).parent().parent().removeClass("drop-open")}),$(".sumbitImageURL").unbind().click(function(){console.log("Passed through .sumbitImageURL");var t=o.contentWindow.editor;url=$(this).parent().children("#imageUrl").first()[0],t.insertImage(url.value),$(this).parent().parent().removeClass("drop-open"),$(this).parent().children("#imageUrl").attr("value","")})}),this.fontDrop=new Drop({target:$("#selectFont").first()[0],content:$("#drop-font").html(),position:"bottom center",openOn:"click"}),this.fontDrop.on("open",function(){$(".quit").click(function(){$(this).parent().parent().removeClass("drop-open")}),$(".submitFont").unbind().click(function(){var t=o.contentWindow.editor,e=$("select#fontSelect option:selected").last().data("fonts"),n=$("select#textSelector option:selected").last().data("size")+"px";t.setFontSize(n);try{t.setFontFace(e)}catch(t){alert("Please make a selection of text.")}finally{$(this).parent().parent().removeClass("drop-open")}})}),$(".item").click(function(){var t=$(this).parents(".Squire-UI").next("iframe").first()[0],e=t.contentWindow.editor,o=$(this).data("action");test={value:$(this).data("action"),testBold:e.testPresenceinSelection("bold",o,"B",/>B\b/),testItalic:e.testPresenceinSelection("italic",o,"I",/>I\b/),testUnderline:e.testPresenceinSelection("underline",o,"U",/>U\b/),testOrderedList:e.testPresenceinSelection("makeOrderedList",o,"OL",/>OL\b/),testLink:e.testPresenceinSelection("makeLink",o,"A",/>A\b/),testQuote:e.testPresenceinSelection("increaseQuoteLevel",o,"blockquote",/>blockquote\b/),isNotValue:function(t){return t==o&&""!==this.value}},e.alignRight=function(){e.setTextAlignment("right")},e.alignCenter=function(){e.setTextAlignment("center")},e.alignLeft=function(){e.setTextAlignment("left")},e.alignJustify=function(){e.setTextAlignment("justify")},e.makeHeading=function(){e.setFontSize("2em"),e.bold()},test.testBold|test.testItalic|test.testUnderline|test.testOrderedList|test.testLink|test.testQuote?(test.testBold&&e.removeBold(),test.testItalic&&e.removeItalic(),test.testUnderline&&e.removeUnderline(),test.testLink&&e.removeLink(),test.testOrderedList&&e.removeList(),test.testQuote&&e.decreaseQuoteLevel()):test.isNotValue("makeLink")|test.isNotValue("insertImage")|test.isNotValue("selectFont")||(e[o](),e.focus())})}),o.addEventListener("load",function(){var t=o.contentDocument;"CSS1Compat"!==t.compatMode&&(t.open(),t.write("<!DOCTYPE html><title></title>"),t.close()),o.contentWindow.editor||(o.contentWindow.editor=new Squire(o.contentWindow.document),o.contentWindow.editor.addStyles("html {  height: 100%;}body {  -moz-box-sizing: border-box;  -webkit-box-sizing: border-box;  box-sizing: border-box;  height: 100%;  padding: 1em;  background: transparent;  color: #2b2b2b;  font: 13px/1.35 Helvetica, arial, sans-serif;  cursor: text;}a {  text-decoration: underline;}h1 {  font-size: 138.5%;}h2 {  font-size: 123.1%;}h3 {  font-size: 108%;}h1,h2,h3,p {  margin: 1em 0;}h4,h5,h6 {  margin: 0;}ul, ol {  margin: 0 1em;  padding: 0 1em;}blockquote {  border-left: 2px solid blue;  margin: 0;  padding: 0 10px;}"))}),$(e).append(n),$(e).append(o),o.contentWindow.editor}}),!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(){return function(){var t,e,o,n,i,s,r,l,h,a,p,u,f,d,c,g,m,b={}.hasOwnProperty,v=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1},y=[].slice;null==this.Tether&&(this.Tether={modules:[]}),p=function(t){var e,o,n,i,s;if(o=getComputedStyle(t).position,"fixed"===o)return t;for(n=void 0,e=t;e=e.parentNode;){try{i=getComputedStyle(e)}catch(t){}if(null==i)return e;if(/(auto|scroll)/.test(i.overflow+i["overflow-y"]+i["overflow-x"])&&("absolute"!==o||"relative"===(s=i.position)||"absolute"===s||"fixed"===s))return e}return document.body},c=function(){var t;return t=0,function(){return t++}}(),m={},h=function(t){var e,n,s,r,l;if(s=t._tetherZeroElement,null==s&&(s=t.createElement("div"),s.setAttribute("data-tether-id",c()),i(s.style,{top:0,left:0,position:"absolute"}),t.body.appendChild(s),t._tetherZeroElement=s),e=s.getAttribute("data-tether-id"),null==m[e]){m[e]={},l=s.getBoundingClientRect();for(n in l)r=l[n],m[e][n]=r;o(function(){return m[e]=void 0})}return m[e]},f=null,r=function(t){var e,o,n,i,s,r,l;t===document?(o=document,t=document.documentElement):o=t.ownerDocument,n=o.documentElement,e={},l=t.getBoundingClientRect();for(i in l)r=l[i],e[i]=r;return s=h(o),e.top-=s.top,e.left-=s.left,null==e.width&&(e.width=document.body.scrollWidth-e.left-e.right),null==e.height&&(e.height=document.body.scrollHeight-e.top-e.bottom),e.top=e.top-n.clientTop,e.left=e.left-n.clientLeft,e.right=o.body.clientWidth-e.width-e.left,e.bottom=o.body.clientHeight-e.height-e.top,e},l=function(t){return t.offsetParent||document.documentElement},a=function(){var t,e,o,n,s;return t=document.createElement("div"),t.style.width="100%",t.style.height="200px",e=document.createElement("div"),i(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e),n=t.offsetWidth,e.style.overflow="scroll",s=t.offsetWidth,n===s&&(s=e.clientWidth),document.body.removeChild(e),o=n-s,{width:o,height:o}},i=function(t){var e,o,n,i,s,r,l;for(null==t&&(t={}),e=[],Array.prototype.push.apply(e,arguments),l=e.slice(1),s=0,r=l.length;r>s;s++)if(n=l[s])for(o in n)b.call(n,o)&&(i=n[o],t[o]=i);return t},d=function(t,e){var o,n,i,s,r;if(null!=t.classList){for(s=e.split(" "),r=[],n=0,i=s.length;i>n;n++)o=s[n],o.trim()&&r.push(t.classList.remove(o));return r}return t.className=t.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},e=function(t,e){var o,n,i,s,r;if(null!=t.classList){for(s=e.split(" "),r=[],n=0,i=s.length;i>n;n++)o=s[n],o.trim()&&r.push(t.classList.add(o));return r}return d(t,e),t.className+=" "+e},u=function(t,e){return null!=t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},g=function(t,o,n){var i,s,r,l,h,a;for(s=0,l=n.length;l>s;s++)i=n[s],v.call(o,i)<0&&u(t,i)&&d(t,i);for(a=[],r=0,h=o.length;h>r;r++)i=o[r],a.push(u(t,i)?void 0:e(t,i));return a},n=[],o=function(t){return n.push(t)},s=function(){var t,e;for(e=[];t=n.pop();)e.push(t());return e},t=function(){function t(){}return t.prototype.on=function(t,e,o,n){var i;return null==n&&(n=!1),null==this.bindings&&(this.bindings={}),null==(i=this.bindings)[t]&&(i[t]=[]),this.bindings[t].push({handler:e,ctx:o,once:n})},t.prototype.once=function(t,e,o){return this.on(t,e,o,!0)},t.prototype.off=function(t,e){var o,n,i;if(null!=(null!=(n=this.bindings)?n[t]:void 0)){if(null==e)return delete this.bindings[t];for(o=0,i=[];o<this.bindings[t].length;)i.push(this.bindings[t][o].handler===e?this.bindings[t].splice(o,1):o++);return i}},t.prototype.trigger=function(){var t,e,o,n,i,s,r,l,h;if(o=arguments[0],t=2<=arguments.length?y.call(arguments,1):[],null!=(r=this.bindings)?r[o]:void 0){for(i=0,h=[];i<this.bindings[o].length;)l=this.bindings[o][i],n=l.handler,e=l.ctx,s=l.once,n.apply(null!=e?e:this,t),h.push(s?this.bindings[o].splice(i,1):i++);return h}},t}(),this.Tether.Utils={getScrollParent:p,getBounds:r,getOffsetParent:l,extend:i,addClass:e,removeClass:d,hasClass:u,updateClasses:g,defer:o,flush:s,uniqueId:c,Evented:t,getScrollBarSize:a}}.call(this),function(){var t,e,o,n,i,s,r,l,h,a,p,u,f,d,c,g,m,b,v,y,w,C,x,O,P,T,E,S,L,k=[].slice,$=function(t,e){return function(){return t.apply(e,arguments)}};if(null==this.Tether)throw new Error("You must include the utils.js file before tether.js");n=this.Tether,L=n.Utils,g=L.getScrollParent,m=L.getSize,d=L.getOuterSize,u=L.getBounds,f=L.getOffsetParent,a=L.extend,i=L.addClass,x=L.removeClass,T=L.updateClasses,h=L.defer,p=L.flush,c=L.getScrollBarSize,E=function(t,e,o){return null==o&&(o=1),t+o>=e&&e>=t-o},P=function(){var t,e,o,n,i;for(t=document.createElement("div"),i=["transform","webkitTransform","OTransform","MozTransform","msTransform"],o=0,n=i.length;n>o;o++)if(e=i[o],void 0!==t.style[e])return e}(),O=[],C=function(){var t,e,o;for(e=0,o=O.length;o>e;e++)t=O[e],t.position(!1);return p()},b=function(){var t;return null!=(t="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?t:+new Date},function(){var t,e,o,n,i,s,r,l,h;for(e=null,o=null,n=null,i=function(){return null!=o&&o>16?(o=Math.min(o-16,250),void(n=setTimeout(i,250))):null!=e&&b()-e<10?void 0:(null!=n&&(clearTimeout(n),n=null),e=b(),C(),o=b()-e)},l=["resize","scroll","touchmove"],h=[],s=0,r=l.length;r>s;s++)t=l[s],h.push(window.addEventListener(t,i));return h}(),t={center:"center",left:"right",right:"left"},e={middle:"middle",top:"bottom",bottom:"top"},o={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},l=function(o,n){var i,s;return i=o.left,s=o.top,"auto"===i&&(i=t[n.left]),"auto"===s&&(s=e[n.top]),{left:i,top:s}},r=function(t){var e,n;return{left:null!=(e=o[t.left])?e:t.left,top:null!=(n=o[t.top])?n:t.top}},s=function(){var t,e,o,n,i,s,r;for(e=1<=arguments.length?k.call(arguments,0):[],o={top:0,left:0},i=0,s=e.length;s>i;i++)r=e[i],n=r.top,t=r.left,"string"==typeof n&&(n=parseFloat(n,10)),"string"==typeof t&&(t=parseFloat(t,10)),o.top+=n,o.left+=t;return o},v=function(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t},y=w=function(t){var e,o,n;return n=t.split(" "),o=n[0],e=n[1],{top:o,left:e}},S=function(){function t(t){this.position=$(this.position,this);var e,o,i,s,r;for(O.push(this),this.history=[],this.setOptions(t,!1),s=n.modules,o=0,i=s.length;i>o;o++)e=s[o],null!=(r=e.initialize)&&r.call(this);this.position()}return t.modules=[],t.prototype.getClass=function(t){var e,o;return(null!=(e=this.options.classes)?e[t]:void 0)?this.options.classes[t]:(null!=(o=this.options.classes)?o[t]:void 0)!==!1?this.options.classPrefix?""+this.options.classPrefix+"-"+t:t:""},t.prototype.setOptions=function(t,e){var o,n,s,r,l,h;for(this.options=t,null==e&&(e=!0),o={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},this.options=a(o,this.options),l=this.options,this.element=l.element,this.target=l.target,this.targetModifier=l.targetModifier,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),h=["element","target"],s=0,r=h.length;r>s;s++){if(n=h[s],null==this[n])throw new Error("Tether Error: Both element and target must be defined");null!=this[n].jquery?this[n]=this[n][0]:"string"==typeof this[n]&&(this[n]=document.querySelector(this[n]))}if(i(this.element,this.getClass("element")),i(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");return this.targetAttachment=y(this.options.targetAttachment),this.attachment=y(this.options.attachment),this.offset=w(this.options.offset),this.targetOffset=w(this.options.targetOffset),null!=this.scrollParent&&this.disable(),this.scrollParent="scroll-handle"===this.targetModifier?this.target:g(this.target),this.options.enabled!==!1?this.enable(e):void 0},t.prototype.getTargetBounds=function(){var t,e,o,n,i,s,r,l,h;if(null==this.targetModifier)return u(this.target);switch(this.targetModifier){case"visible":return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:(t=u(this.target),i={height:t.height,width:t.width,top:t.top,left:t.left},i.height=Math.min(i.height,t.height-(pageYOffset-t.top)),i.height=Math.min(i.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),i.height=Math.min(innerHeight,i.height),i.height-=2,i.width=Math.min(i.width,t.width-(pageXOffset-t.left)),i.width=Math.min(i.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),i.width=Math.min(innerWidth,i.width),i.width-=2,i.top<pageYOffset&&(i.top=pageYOffset),i.left<pageXOffset&&(i.left=pageXOffset),i);case"scroll-handle":return h=this.target,h===document.body?(h=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=u(h),l=getComputedStyle(h),o=h.scrollWidth>h.clientWidth||"scroll"===[l.overflow,l.overflowX]||this.target!==document.body,s=0,o&&(s=15),n=t.height-parseFloat(l.borderTopWidth)-parseFloat(l.borderBottomWidth)-s,i={width:15,height:.975*n*(n/h.scrollHeight),left:t.left+t.width-parseFloat(l.borderLeftWidth)-15},e=0,408>n&&this.target===document.body&&(e=-11e-5*Math.pow(n,2)-.00727*n+22.58),this.target!==document.body&&(i.height=Math.max(i.height,24)),r=this.target.scrollTop/(h.scrollHeight-n),i.top=r*(n-i.height-e)+t.top+parseFloat(l.borderTopWidth),this.target===document.body&&(i.height=Math.max(i.height,24)),i}},t.prototype.clearCache=function(){return this._cache={}},t.prototype.cache=function(t,e){return null==this._cache&&(this._cache={}),null==this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]},t.prototype.enable=function(t){return null==t&&(t=!0),i(this.target,this.getClass("enabled")),i(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),t?this.position():void 0},t.prototype.disable=function(){return x(this.target,this.getClass("enabled")),x(this.element,this.getClass("enabled")),this.enabled=!1,null!=this.scrollParent?this.scrollParent.removeEventListener("scroll",this.position):void 0},t.prototype.destroy=function(){var t,e,o,n,i;for(this.disable(),i=[],t=o=0,n=O.length;n>o;t=++o){if(e=O[t],e===this){O.splice(t,1);break}i.push(void 0)}return i},t.prototype.updateAttachClasses=function(t,e){var o,n,i,s,r,l,a,p,u,f=this;for(null==t&&(t=this.attachment),null==e&&(e=this.targetAttachment),s=["left","top","bottom","right","middle","center"],(null!=(u=this._addAttachClasses)?u.length:void 0)&&this._addAttachClasses.splice(0,this._addAttachClasses.length),o=null!=this._addAttachClasses?this._addAttachClasses:this._addAttachClasses=[],t.top&&o.push(""+this.getClass("element-attached")+"-"+t.top),t.left&&o.push(""+this.getClass("element-attached")+"-"+t.left),e.top&&o.push(""+this.getClass("target-attached")+"-"+e.top),e.left&&o.push(""+this.getClass("target-attached")+"-"+e.left),n=[],r=0,a=s.length;a>r;r++)i=s[r],n.push(""+this.getClass("element-attached")+"-"+i);for(l=0,p=s.length;p>l;l++)i=s[l],n.push(""+this.getClass("target-attached")+"-"+i);return h(function(){return null!=f._addAttachClasses?(T(f.element,f._addAttachClasses,n),T(f.target,f._addAttachClasses,n),f._addAttachClasses=void 0):void 0})},t.prototype.position=function(t){var e,o,i,h,a,d,g,m,b,y,w,C,x,O,P,T,E,S,L,k,$,W,_,z,A,B,M,F,U,D,N,H,q,I,Y,j=this;if(null==t&&(t=!0),this.enabled){for(this.clearCache(),k=l(this.targetAttachment,this.attachment),this.updateAttachClasses(this.attachment,k),e=this.cache("element-bounds",function(){return u(j.element)}),A=e.width,i=e.height,0===A&&0===i&&null!=this.lastSize?(D=this.lastSize,A=D.width,i=D.height):this.lastSize={width:A,height:i},_=W=this.cache("target-bounds",function(){return j.getTargetBounds()}),b=v(r(this.attachment),{width:A,height:i}),$=v(r(k),_),a=v(this.offset,{width:A,height:i}),d=v(this.targetOffset,_),b=s(b,a),$=s($,d),h=W.left+$.left-b.left,z=W.top+$.top-b.top,N=n.modules,B=0,F=N.length;F>B;B++)if(g=N[B],P=g.position.call(this,{left:h,top:z,targetAttachment:k,targetPos:W,attachment:this.attachment,elementPos:e,offset:b,targetOffset:$,manualOffset:a,manualTargetOffset:d,scrollbarSize:S}),null!=P&&"object"==typeof P){if(P===!1)return!1;z=P.top,h=P.left}if(m={page:{top:z,left:h},viewport:{top:z-pageYOffset,bottom:pageYOffset-z-i+innerHeight,left:h-pageXOffset,right:pageXOffset-h-A+innerWidth}},document.body.scrollWidth>window.innerWidth&&(S=this.cache("scrollbar-size",c),m.viewport.bottom-=S.height),document.body.scrollHeight>window.innerHeight&&(S=this.cache("scrollbar-size",c),m.viewport.right-=S.width),(""!==(H=document.body.style.position)&&"static"!==H||""!==(q=document.body.parentElement.style.position)&&"static"!==q)&&(m.page.bottom=document.body.scrollHeight-z-i,m.page.right=document.body.scrollWidth-h-A),(null!=(I=this.options.optimizations)?I.moveElement:void 0)!==!1&&null==this.targetModifier){for(w=this.cache("target-offsetparent",function(){return f(j.target)}),O=this.cache("target-offsetparent-bounds",function(){return u(w)}),x=getComputedStyle(w),o=getComputedStyle(this.element),C=O,y={},Y=["Top","Left","Bottom","Right"],M=0,U=Y.length;U>M;M++)L=Y[M],y[L.toLowerCase()]=parseFloat(x["border"+L+"Width"]);O.right=document.body.scrollWidth-O.left-C.width+y.right,O.bottom=document.body.scrollHeight-O.top-C.height+y.bottom,m.page.top>=O.top+y.top&&m.page.bottom>=O.bottom&&m.page.left>=O.left+y.left&&m.page.right>=O.right&&(E=w.scrollTop,T=w.scrollLeft,m.offset={top:m.page.top-O.top+E-y.top,left:m.page.left-O.left+T-y.left})}return this.move(m),this.history.unshift(m),this.history.length>3&&this.history.pop(),t&&p(),!0}},t.prototype.move=function(t){var e,o,n,i,s,r,l,p,u,d,c,g,m,b,v,y,w,C=this;if(null!=this.element.parentNode){p={};for(d in t){p[d]={};for(i in t[d]){for(n=!1,y=this.history,b=0,v=y.length;v>b;b++)if(l=y[b],!E(null!=(w=l[d])?w[i]:void 0,t[d][i])){n=!0;break}n||(p[d][i]=!0)}}e={top:"",left:"",right:"",bottom:""},u=function(t,o){var n,i,s;return(null!=(s=C.options.optimizations)?s.gpu:void 0)===!1?(t.top?e.top=""+o.top+"px":e.bottom=""+o.bottom+"px",t.left?e.left=""+o.left+"px":e.right=""+o.right+"px"):(t.top?(e.top=0,i=o.top):(e.bottom=0,i=-o.bottom),t.left?(e.left=0,n=o.left):(e.right=0,n=-o.right),e[P]="translateX("+Math.round(n)+"px) translateY("+Math.round(i)+"px)","msTransform"!==P?e[P]+=" translateZ(0)":void 0)},s=!1,(p.page.top||p.page.bottom)&&(p.page.left||p.page.right)?(e.position="absolute",u(p.page,t.page)):(p.viewport.top||p.viewport.bottom)&&(p.viewport.left||p.viewport.right)?(e.position="fixed",u(p.viewport,t.viewport)):null!=p.offset&&p.offset.top&&p.offset.left?(e.position="absolute",r=this.cache("target-offsetparent",function(){return f(C.target)}),f(this.element)!==r&&h(function(){return C.element.parentNode.removeChild(C.element),r.appendChild(C.element)}),u(p.offset,t.offset),s=!0):(e.position="absolute",u({top:!0,left:!0},t.page)),s||"BODY"===this.element.parentNode.tagName||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element)),m={},g=!1;for(i in e)c=e[i],o=this.element.style[i],""===o||""===c||"top"!==i&&"left"!==i&&"bottom"!==i&&"right"!==i||(o=parseFloat(o),c=parseFloat(c)),o!==c&&(g=!0,m[i]=e[i]);return g?h(function(){return a(C.element.style,m)}):void 0}},t}(),n.position=C,this.Tether=a(S,n)}.call(this),function(){var t,e,o,n,i,s,r,l,h,a,p=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1};a=this.Tether.Utils,r=a.getOuterSize,s=a.getBounds,l=a.getSize,n=a.extend,h=a.updateClasses,o=a.defer,e={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle"},t=["left","top","right","bottom"],i=function(e,o){var n,i,r,l,h,a,p;if("scrollParent"===o?o=e.scrollParent:"window"===o&&(o=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),o===document&&(o=o.documentElement),null!=o.nodeType)for(i=l=s(o),h=getComputedStyle(o),o=[i.left,i.top,l.width+i.left,l.height+i.top],n=a=0,p=t.length;p>a;n=++a)r=t[n],r=r[0].toUpperCase()+r.substr(1),"Top"===r||"Left"===r?o[n]+=parseFloat(h["border"+r+"Width"]):o[n]-=parseFloat(h["border"+r+"Width"]);return o},this.Tether.modules.push({position:function(e){var r,l,a,u,f,d,c,g,m,b,v,y,w,C,x,O,P,T,E,S,L,k,$,W,_,z,A,B,M,F,U,D,N,H,q,I,Y,j,X,R,Q,V,Z,J,G,K,tt,et=this;if(z=e.top,v=e.left,L=e.targetAttachment,!this.options.constraints)return!0;for(T=function(e){var o,n,i,s;for(et.removeClass(e),s=[],n=0,i=t.length;i>n;n++)o=t[n],s.push(et.removeClass(""+e+"-"+o));return s},R=this.cache("element-bounds",function(){return s(et.element)}),b=R.height,A=R.width,0===A&&0===b&&null!=this.lastSize&&(Q=this.lastSize,A=Q.width,b=Q.height),$=this.cache("target-bounds",function(){return et.getTargetBounds()}),k=$.height,W=$.width,S={},m={},l=[this.getClass("pinned"),this.getClass("out-of-bounds")],V=this.options.constraints,B=0,D=V.length;D>B;B++)g=V[B],g.outOfBoundsClass&&l.push(g.outOfBoundsClass),g.pinnedClass&&l.push(g.pinnedClass);for(M=0,N=l.length;N>M;M++)for(c=l[M],Z=["left","top","right","bottom"],F=0,H=Z.length;H>F;F++)E=Z[F],l.push(""+c+"-"+E);for(r=[],S=n({},L),m=n({},this.attachment),J=this.options.constraints,U=0,q=J.length;q>U;U++){if(g=J[U],_=g.to,a=g.attachment,x=g.pin,null==a&&(a=""),p.call(a," ")>=0?(G=a.split(" "),d=G[0],f=G[1]):f=d=a,u=i(this,_),("target"===d||"both"===d)&&(z<u[1]&&"top"===S.top&&(z+=k,S.top="bottom"),z+b>u[3]&&"bottom"===S.top&&(z-=k,S.top="top")),"together"===d&&(z<u[1]&&"top"===S.top&&("bottom"===m.top?(z+=k,S.top="bottom",z+=b,m.top="top"):"top"===m.top&&(z+=k,S.top="bottom",z-=b,m.top="bottom")),z+b>u[3]&&"bottom"===S.top&&("top"===m.top?(z-=k,S.top="top",z-=b,m.top="bottom"):"bottom"===m.top&&(z-=k,S.top="top",z+=b,m.top="top")),"middle"===S.top&&(z+b>u[3]&&"top"===m.top?(z-=b,m.top="bottom"):z<u[1]&&"bottom"===m.top&&(z+=b,m.top="top"))),("target"===f||"both"===f)&&(v<u[0]&&"left"===S.left&&(v+=W,S.left="right"),v+A>u[2]&&"right"===S.left&&(v-=W,S.left="left")),"together"===f&&(v<u[0]&&"left"===S.left?"right"===m.left?(v+=W,S.left="right",v+=A,m.left="left"):"left"===m.left&&(v+=W,S.left="right",v-=A,m.left="right"):v+A>u[2]&&"right"===S.left?"left"===m.left?(v-=W,S.left="left",v-=A,m.left="right"):"right"===m.left&&(v-=W,S.left="left",v+=A,m.left="left"):"center"===S.left&&(v+A>u[2]&&"left"===m.left?(v-=A,m.left="right"):v<u[0]&&"right"===m.left&&(v+=A,m.left="left"))),("element"===d||"both"===d)&&(z<u[1]&&"bottom"===m.top&&(z+=b,m.top="top"),z+b>u[3]&&"top"===m.top&&(z-=b,m.top="bottom")),("element"===f||"both"===f)&&(v<u[0]&&"right"===m.left&&(v+=A,m.left="left"),v+A>u[2]&&"left"===m.left&&(v-=A,m.left="right")),"string"==typeof x?x=function(){var t,e,o,n;for(o=x.split(","),n=[],e=0,t=o.length;t>e;e++)C=o[e],n.push(C.trim());return n}():x===!0&&(x=["top","left","right","bottom"]),x||(x=[]),O=[],y=[],z<u[1]&&(p.call(x,"top")>=0?(z=u[1],O.push("top")):y.push("top")),z+b>u[3]&&(p.call(x,"bottom")>=0?(z=u[3]-b,O.push("bottom")):y.push("bottom")),v<u[0]&&(p.call(x,"left")>=0?(v=u[0],O.push("left")):y.push("left")),v+A>u[2]&&(p.call(x,"right")>=0?(v=u[2]-A,O.push("right")):y.push("right")),O.length)for(P=null!=(K=this.options.pinnedClass)?K:this.getClass("pinned"),r.push(P),j=0,I=O.length;I>j;j++)E=O[j],r.push(""+P+"-"+E);if(y.length)for(w=null!=(tt=this.options.outOfBoundsClass)?tt:this.getClass("out-of-bounds"),r.push(w),X=0,Y=y.length;Y>X;X++)E=y[X],r.push(""+w+"-"+E);(p.call(O,"left")>=0||p.call(O,"right")>=0)&&(m.left=S.left=!1),(p.call(O,"top")>=0||p.call(O,"bottom")>=0)&&(m.top=S.top=!1),(S.top!==L.top||S.left!==L.left||m.top!==this.attachment.top||m.left!==this.attachment.left)&&this.updateAttachClasses(m,S)}return o(function(){return h(et.target,r,l),h(et.element,r,l)}),{top:z,left:v}}})}.call(this),function(){var t,e,o,n;n=this.Tether.Utils,e=n.getBounds,o=n.updateClasses,t=n.defer,this.Tether.modules.push({position:function(n){var i,s,r,l,h,a,p,u,f,d,c,g,m,b,v,y,w,C,x,O,P,T,E,S,L,k=this;if(c=n.top,a=n.left,P=this.cache("element-bounds",function(){return e(k.element)}),h=P.height,g=P.width,d=this.getTargetBounds(),l=c+h,p=a+g,i=[],c<=d.bottom&&l>=d.top)for(T=["left","right"],m=0,w=T.length;w>m;m++)u=T[m],((E=d[u])===a||E===p)&&i.push(u);if(a<=d.right&&p>=d.left)for(S=["top","bottom"],b=0,C=S.length;C>b;b++)u=S[b],((L=d[u])===c||L===l)&&i.push(u);for(r=[],s=[],f=["left","top","right","bottom"],r.push(this.getClass("abutted")),v=0,x=f.length;x>v;v++)u=f[v],r.push(""+this.getClass("abutted")+"-"+u);for(i.length&&s.push(this.getClass("abutted")),y=0,O=i.length;O>y;y++)u=i[y],s.push(""+this.getClass("abutted")+"-"+u);return t(function(){return o(k.target,s,r),o(k.element,s,r)}),!0}})}.call(this),function(){this.Tether.modules.push({position:function(t){var e,o,n,i,s,r,l;return r=t.top,e=t.left,this.options.shift?(o=function(t){return"function"==typeof t?t.call(this,{top:r,left:e}):t},n=o(this.options.shift),"string"==typeof n?(n=n.split(" "),n[1]||(n[1]=n[0]),s=n[0],i=n[1],s=parseFloat(s,10),i=parseFloat(i,10)):(l=[n.top,n.left],s=l[0],i=l[1]),r+=s,e+=i,{top:r,left:e}):void 0}})}.call(this),this.Tether}),function(){var t,e,o,n,i,s,r,l,h,a,p,u,f,d,c,g,m,b,v={}.hasOwnProperty,y=function(t,e){function o(){this.constructor=t}for(var n in e)v.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},w=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1};b=Tether.Utils,l=b.extend,o=b.addClass,p=b.removeClass,h=b.hasClass,t=b.Evented,c="ontouchstart"in document.documentElement,i=["click"],c&&i.push("touchstart"),m={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},g="";for(a in m)r=m[a],d=document.createElement("p"),void 0!==d.style[a]&&(g=r);f=function(t){var e,o,n,i;return n=t.split(" "),e=n[0],o=n[1],("left"===e||"right"===e)&&(i=[o,e],e=i[0],o=i[1]),[e,o].join(" ")},e={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},n={},u=function(t,e){var o,n;for(n=[];-1!==(o=t.indexOf(e));)n.push(t.splice(o,1));return n},s=function(r){var a,d,c,m;return null==r&&(r={}),c=function(){return function(t,e,o){o.prototype=t.prototype;var n=new o,i=t.apply(n,e);return Object(i)===i?i:n}(a,arguments,function(){})},l(c,{createContext:s,drops:[],defaults:{}}),d={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,tetherOptions:{}}},l(c,d,r),l(c.defaults,d.defaults,r.defaults),null==n[m=c.classPrefix]&&(n[m]=[]),c.updateBodyClasses=function(){var t,e,i,s,r;for(t=!1,r=n[c.classPrefix],i=0,s=r.length;s>i;i++)if(e=r[i],e.isOpened()){t=!0;break}return t?o(document.body,""+c.classPrefix+"-open"):p(document.body,""+c.classPrefix+"-open")},a=function(t){function s(t){if(this.options=t,this.options=l({},c.defaults,this.options),this.target=this.options.target,null==this.target)throw new Error("Drop Error: You must provide a target.");this.options.classes&&o(this.target,this.options.classes),c.drops.push(this),n[c.classPrefix].push(this),this._boundEvents=[],this.setupElements(),this.setupEvents(),this.setupTether()}return y(s,t),s.prototype._on=function(t,e,o){return this._boundEvents.push({element:t,event:e,handler:o}),t.addEventListener(e,o)},s.prototype.setupElements=function(){return this.drop=document.createElement("div"),o(this.drop,c.classPrefix),this.options.classes&&o(this.drop,this.options.classes),this.content=document.createElement("div"),o(this.content,""+c.classPrefix+"-content"),"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content,this.drop.appendChild(this.content)},s.prototype.setupTether=function(){var t,o;return o=this.options.position.split(" "),o[0]=e[o[0]],o=o.join(" "),t=[],t.push(this.options.constrainToScrollParent?{to:"scrollParent",pin:"top, bottom",attachment:"together none"}:{to:"scrollParent"}),t.push(this.options.constrainToWindow!==!1?{to:"window",attachment:"together"}:{to:"window"}),r={element:this.drop,target:this.target,attachment:f(o),targetAttachment:f(this.options.position),classPrefix:c.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:t},this.options.tetherOptions!==!1?this.tether=new Tether(l({},r,this.options.tetherOptions)):void 0},s.prototype.setupEvents=function(){var t,e,o,n,s,r,l,h,a,p,u=this;if(this.options.openOn){if("always"===this.options.openOn)return void setTimeout(this.open.bind(this));if(o=this.options.openOn.split(" "),w.call(o,"click")>=0)for(s=function(t){return u.toggle(),t.preventDefault()},e=function(t){return!u.isOpened()||t.target===u.drop||u.drop.contains(t.target)||t.target===u.target||u.target.contains(t.target)?void 0:u.close()},a=0,p=i.length;p>a;a++)t=i[a],this._on(this.target,t,s),this._on(document,t,e);return w.call(o,"hover")>=0?(n=!1,h=function(){return n=!0,u.open()},l=null,r=function(){return n=!1,null!=l&&clearTimeout(l),l=setTimeout(function(){return n||u.close(),l=null},50)},this._on(this.target,"mouseover",h),this._on(this.drop,"mouseover",h),this._on(this.target,"mouseout",r),this._on(this.drop,"mouseout",r)):void 0}},s.prototype.isOpened=function(){return h(this.drop,""+c.classPrefix+"-open")},s.prototype.toggle=function(){return this.isOpened()?this.close():this.open()},s.prototype.open=function(){var t,e,n=this;if(!this.isOpened())return this.drop.parentNode||document.body.appendChild(this.drop),null!=(t=this.tether)&&t.enable(),o(this.drop,""+c.classPrefix+"-open"),o(this.drop,""+c.classPrefix+"-open-transitionend"),setTimeout(function(){return o(n.drop,""+c.classPrefix+"-after-open")}),null!=(e=this.tether)&&e.position(),this.trigger("open"),c.updateBodyClasses()},s.prototype.close=function(){var t,e,o=this;if(this.isOpened())return p(this.drop,""+c.classPrefix+"-open"),p(this.drop,""+c.classPrefix+"-after-open"),this.drop.addEventListener(g,t=function(){return h(o.drop,""+c.classPrefix+"-open")||p(o.drop,""+c.classPrefix+"-open-transitionend"),o.drop.removeEventListener(g,t)}),this.trigger("close"),null!=(e=this.tether)&&e.disable(),c.updateBodyClasses(),this.options.remove?this.remove():void 0},s.prototype.remove=function(){var t;return this.close(),null!=(t=this.drop.parentNode)?t.removeChild(this.drop):void 0},s.prototype.position=function(){var t;return this.isOpened()&&null!=(t=this.tether)?t.position():void 0},s.prototype.destroy=function(){var t,e,o,i,s,r,l,h;for(this.remove(),null!=(r=this.tether)&&r.destroy(),l=this._boundEvents,i=0,s=l.length;s>i;i++)h=l[i],t=h.element,e=h.event,o=h.handler,t.removeEventListener(e,o);return this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,u(n[c.classPrefix],this),u(c.drops,this)},s}(t),c},window.Drop=s(),document.addEventListener("DOMContentLoaded",function(){return Drop.updateBodyClasses()})}.call(this);